---
layout: post
title: "Object #3부 - 
description: >
  
image: /assets/img/study/objectCover.jpg
related_posts:

categories: [ study,object ]
---

* toc
{:toc}

객체에 할당된 책임의 품질은 **`객체 협력관계에서 협력에 적합한가?`** 로 결정된다.<br>
클래스의 이름이라던가 느낌과는 다른 이야기다.<br>
ex) Movie 클래스가 영화 할인액 계산의 책임을 가지고 있는 것 처럼<br>
이제부터 어떻게 책임을 할당하는게 좋은 방법인지 생각해보자.<br>

## 객체에 책임 할당 원리

가장 먼저 바꿔야할 생각은 `이 객체는 뭐할지 정하자` 라는 객체 1인칭 시점에서 벗어나야 한다.<br>
그 이전에 다른 객체로부터 프로그램 진행에서 필요한 수행을 메세지로 요청받고, `다른 객체의 메세지 요청을 내가 가진 상태로 처리해주는 것이 책임`이라는 점이다.<br>
최소한의 협력관계에서 특정 객체의 메세지를 누가 받아야 하지? 라고 사고해야한다.<br>
요청을 하는 객체는 누군가 나의 요청을 받아서 처리 하는지 알 필요가 없어지고 누군가 받아서 처리해주길 바라는 메세지를 보내면 된다.<br>
전송자 - 수신자 간의 격리가 이루어져 캡슐화의 원리가 지키기 쉬워진다.<br>


### 객체 책임 할당 원칙 `GRASP 패턴`

> **G**eneral **R**esponsibility **A**ssignment **S**oftware **P**attern<br>
> 일반적인 책임 할당을 위한 소프트웨어 패턴


#### 1. 도메인 개념에서 출발하기

프로그램의 존재 이유는 도메인을 해결하기 위함이다.<br>
구축하려는 시스템의 개략적인 모습을 그려본다.<br>

![김현우_도메인개념](https://github.com/nomoreFt/nomoreFt.github.io/assets/37995817/a0ec844f-6582-4bad-8e35-8cb60928a004){:.centered}{: width="700"}
영화 예매 프로그램을 만들 때 짜이는 개략적인 도메인 개념
{:.figcaption}

**도메인 개념은 구현의 기반으로써 유연하게 사용된다.**

#### 2. 정보 전문가에게 책임을 할당하기

Application이 제공해야 하는 기능을 구현하기 위해 요청된 진입 메세지를 설정한다.<br>
영화 예매 프로그램의 경우 `예매하라` 가 된다.<br>
중요한 점은 메시지를 수신자의 입장이 아니라 전송자가 왜 필요한지에 대한 의도를 담아 메시지를 설정해야 한다.<br>

* 메세지를 전송할 객체는 무엇을 원하는가?
* 메세지를 수신할 적합 객체는 무엇인가?

객체는 `책임 + 책임을 수행하기위해 필요한 상태` 라는 것을 상기해야 한다.<br>
메시지가 먼저 정해지면, 이후 메시지를 수행하기 좋은 객체를 선정하여야 한다.<br>
기준은 도메인 개념을 참고하고, 메시지를 수행하기 위해 필요한 `정보`를 가장 많이 알고 있는 객체를 선택한다.<br>

`정보`는 객체의 데이터와 다르다. 책임 수행에 선정된 객체가 저장하고 있을 필요는 없다. <br>
또 다른 객체를 호출해 부탁해도 되고 계산해서 제공해도 된다.
{:.note}


#### Q : 책임 설계에서 높은 응집도와 낮은 결합도를 지향하는 이유가 무엇일까?

객체에게 책임을 할당하거나 설계 대안 중 하나를 선택해야 할 때는 높은 응집도와 낮은 결합도를 위한 최선의 선택을 해야 한다.<br>


`LOW COUPLING(낮은 결합도)`를 위해 협력에 필요한 작업 완수를 위해 적절한 의존성을 설정해야 한다.<br>
EX) Screening 객체가 Movie 객체에게 금액 계산을 요구할 때, DiscountCondition 객체는 Screening과 의존하는게 좋을까 Movie와 결합하는게 좋을까?<br>

책임을 수행하는데 꼭 필요한 객체들끼리 의존시켜 의존성을 낮추고 변화의 영향을 줄이며 재사용성을 증가시킬 수 있다.
{:.note}

`HIGH COHENSION(높은 응집도)`는 서로 다른 이유로 변경되는 책임이 없을 수록 좋다.<br>
자기가 부여받은 역할의 책임을 수행하는데 집중할 수 있기 때문이다.<br>

객체간의 관계에서 복잡성을 관리할 수 있다.
{:.note}

높은 응집도와 낮은 결합도를 지향하면 설계의 품질 향상에 도움이 된다.<br>
책임 수행에 꼭 필요한 객체만 의존하였는가? 책임과 연관성이 없는 객체는 의존하지 않았는가? 를 고민해보자.<br>
그리고 한 객체가 하는 일이 너무 많지는 않은가? 를 고민해보자.<br>
심지어 객체에 대한 Validation도 분리하는 것이 좋다. (검증 로직과 비즈니스 로직이 함께 들어있으면 2가지 관점에서 변경이 이뤄지므로)<br>


#### 객체 생성에 대한 책임 할당

특정 객체 A를 생성해야 할 책임을 할당할 때, 아래 조건을 최대한 만족하는 객체에게 할당해야 한다.

* A객체를 포함하거나 참조한다.
* A객체를 기록한다.
* A객체를 긴밀하게 사용한다.
* A객체를 초기화하는데 많은 데이터를 가지고 있다.




#### GRASP 패턴 정리

* 도메인 개념 설계
* INFORMATION EXPERT 패턴
* LOW COUPLING 패턴
* HIGH COHENSION 패턴
* CREATOR 패턴



---

